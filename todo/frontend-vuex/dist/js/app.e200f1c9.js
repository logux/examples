(function(t){function e(e){for(var o,r,s=e[0],c=e[1],l=e[2],d=0,p=[];d<s.length;d++)r=s[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&p.push(i[r][0]),i[r]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);u&&u(e);while(p.length)p.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],o=!0,s=1;s<n.length;s++){var c=n[s];0!==i[c]&&(o=!1)}o&&(a.splice(e--,1),t=r(r.s=n[0]))}return t}var o={},i={app:0},a=[];function r(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=o,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"533c":function(t,e,n){},7438:function(t,e,n){"use strict";var o=n("533c"),i=n.n(o);i.a},cd49:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"todoapp"},[n("header",{staticClass:"header"},[n("h1",[t._v("todos")]),n("Login"),t.logged?n("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:"new-todo",attrs:{autofocus:"",autocomplete:"off",placeholder:"What needs to be done?"},domProps:{value:t.text},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.append(e)},input:function(e){e.target.composing||(t.text=e.target.value)}}}):t._e()],1),t.logged?n("section",{staticClass:"main"},[n("input",{staticClass:"toggle-all",attrs:{id:"toggle-all",type:"checkbox"},domProps:{checked:t.allDone},on:{click:function(e){return t.toggleAll(!t.allDone)}}}),n("label",{attrs:{for:"toggle-all"}},[t._v("Mark all as complete")]),n("ul",{staticClass:"todo-list"},t._l(t.list,(function(t){return n("TodoItem",{key:t.id,attrs:{todo:t}})})),1)]):t._e(),t.logged?n("footer",{directives:[{name:"show",rawName:"v-show",value:t.all.length,expression:"all.length"}],staticClass:"footer"},[n("span",{staticClass:"todo-count"},[n("strong",{domProps:{textContent:t._s(t.remaining)}}),t._v(" "+t._s(t.remainingText)+" left ")]),n("ul",{staticClass:"filters"},[n("li",[n("a",{class:{selected:"all"==t.visibility},on:{click:function(e){t.visibility="all"}}},[t._v("All")])]),n("li",[n("a",{class:{selected:"active"==t.visibility},on:{click:function(e){t.visibility="active"}}},[t._v("Active")])]),n("li",[n("a",{class:{selected:"completed"==t.visibility},on:{click:function(e){t.visibility="completed"}}},[t._v("Completed")])])]),n("button",{directives:[{name:"show",rawName:"v-show",value:t.completed.length>0,expression:"completed.length > 0"}],staticClass:"clear-completed",on:{click:t.removeCompleted}},[t._v("Clear completed")])]):t._e()])},a=[],r=(n("4de4"),n("4160"),n("159b"),n("d4ec")),s=n("bee2"),c=n("262e"),l=n("2caf"),u=n("9ab4"),d=n("60a3"),p=n("e4cf"),f=n("e1bd"),g=n("baab"),v=Object(g["actionCreatorFactory"])("todo"),h=v("add"),y=v("remove"),m=v("editText"),b=v("toggle"),k=function(t){Object(c["a"])(n,t);var e=Object(l["a"])(n);function n(){return Object(r["a"])(this,n),e.apply(this,arguments)}return Object(s["a"])(n,[{key:"commitSync",value:function(t){this.$store.commit.sync(t)}},{key:"commitCrossTab",value:function(t){this.$store.commit.crossTab(t)}}]),n}(d["c"]),O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.logged?n("div",{staticClass:"logged"},[n("span",[t._v(t._s(t.loggedLogin))]),n("button",{staticClass:"logout",on:{click:t.logout}})]):n("div",{staticClass:"auth"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.login,expression:"login"}],staticClass:"new-todo",attrs:{required:"",placeholder:"my login",disabled:t.wait},domProps:{value:t.login},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.doLogin(e)},input:function(e){e.target.composing||(t.login=e.target.value)}}}),n("button",{staticClass:"login",attrs:{disabled:t.wait},on:{click:t.doLogin}})])])},j=[],x=Object(g["actionCreatorFactory"])("auth"),w=x("login"),C=x("login/done"),_="anonymous",E=function(t){Object(c["a"])(n,t);var e=Object(l["a"])(n);function n(){var t;return Object(r["a"])(this,n),t=e.apply(this,arguments),t.login="",t}return Object(s["a"])(n,[{key:"doLogin",value:function(){this.commitSync(w({login:this.login}))}},{key:"logout",value:function(){this.commitCrossTab({type:"auth/logout"})}},{key:"wait",get:function(){return"waitLogin"==this.$store.state.auth.status}},{key:"logged",get:function(){return"logged"==this.$store.state.auth.status}},{key:"loggedLogin",get:function(){return this.$store.state.auth.login}}]),n}(k);E=Object(u["a"])([d["a"]],E);var L=E,P=L,S=(n("7438"),n("2877")),$=Object(S["a"])(P,O,j,!1,null,"202cf925",null),I=$.exports,T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"todo",class:{completed:t.todo.done,editing:t.edit}},[n("div",{staticClass:"view"},[n("input",{staticClass:"toggle",attrs:{type:"checkbox"},domProps:{checked:t.todo.done},on:{change:t.toggle}}),n("label",{on:{dblclick:function(e){t.edit=!0}}},[t._v(t._s(t.todo.text))]),n("button",{staticClass:"destroy",on:{click:t.remove}})]),n("input",{directives:[{name:"focus",rawName:"v-focus",value:t.edit,expression:"edit"}],staticClass:"edit",attrs:{type:"text"},domProps:{value:t.todo.text},on:{blur:t.doneEdit,keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.doneEdit(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.cancelEdit(e)}]}})])},M=[],N=function(t){Object(c["a"])(n,t);var e=Object(l["a"])(n);function n(){var t;return Object(r["a"])(this,n),t=e.apply(this,arguments),t.edit=!1,t}return Object(s["a"])(n,[{key:"toggle",value:function(t){this.commitSync(b({id:this.todo.id,done:!this.todo.done}))}},{key:"doneEdit",value:function(t){console.log(t),this.edit=!1}},{key:"cancelEdit",value:function(){this.edit=!1}},{key:"remove",value:function(){this.commitSync(y({id:this.todo.id}))}}]),n}(k);Object(u["a"])([Object(d["b"])()],N.prototype,"todo",void 0),N=Object(u["a"])([Object(d["a"])({directives:{focus:{update:function(t,e){console.log(e,t),e.value&&t.focus()}}}})],N);var A=N,D=A,F=Object(S["a"])(D,T,M,!1,null,"140252bd",null),R=F.exports,J=function(t){Object(c["a"])(n,t);var e=Object(l["a"])(n);function n(){var t;return Object(r["a"])(this,n),t=e.apply(this,arguments),t.text="",t.visibility="all",t}return Object(s["a"])(n,[{key:"removeCompleted",value:function(){var t=this;this.completed.forEach((function(e){return t.commitSync(y({id:e.id}))}))}},{key:"toggleAll",value:function(t){var e=this;this.all.filter((function(e){return e.done!=t})).forEach((function(n){return e.commitSync(b({id:n.id,done:t}))}))}},{key:"append",value:function(){this.commitSync(h({id:Object(f["a"])(),text:this.text,done:!1})),this.text=""}},{key:"logged",get:function(){return"logged"==this.$store.state.auth.status}},{key:"channels",get:function(){var t=this.$store.state.auth.userId;return this.logged?["todos/".concat(t)]:[]}},{key:"all",get:function(){return this.$store.state.todo.list}},{key:"active",get:function(){return this.all.filter((function(t){return!t.done}))}},{key:"completed",get:function(){return this.all.filter((function(t){return t.done}))}},{key:"allDone",get:function(){return 0==this.active.length}},{key:"list",get:function(){switch(this.visibility){case"all":return this.all;case"active":return this.active;case"completed":return this.completed;default:return[]}}},{key:"remaining",get:function(){return this.active.length}},{key:"remainingText",get:function(){return 1===this.remaining?"item":"items"}}]),n}(k);J=Object(u["a"])([Object(d["a"])({components:{Login:I,TodoItem:R},mixins:[p["loguxMixin"]]})],J);var W,q=J,z=q,U=Object(S["a"])(z,i,a,!1,null,null,null),B=U.exports,G=(n("a434"),n("2ca0"),n("96cf"),n("1da1")),H=n("2f62"),K=n("c059"),Q=n("36a0"),V=n("ade3"),X=function(t){var e,n={state:{status:"notLogged",userId:"",login:""},mutations:(e={},Object(V["a"])(e,w.type,(function(t){t.status="waitLogin"})),Object(V["a"])(e,C.type,(function(e,n){var o=n.payload;e.userId=o.userId,e.status="waitLogin",e.login=o.login,t(o.userId,o.token)})),Object(V["a"])(e,"auth/done",(function(t,e){var n=e.logged;t.status=n?"logged":"notLogged"})),Object(V["a"])(e,"auth/logout",(function(e){e.status="waitLogin",t(_,"")})),e),actions:{}};return n};n("c740");function Y(t,e){return t.findIndex((function(t){return t.id==e}))}var Z={state:{list:[]},mutations:(W={},Object(V["a"])(W,h.type,(function(t,e){var n=e.payload;t.list.push(n)})),Object(V["a"])(W,y.type,(function(t,e){var n=e.payload,o=Y(t.list,n.id);-1!=o&&t.list.splice(o,1)})),Object(V["a"])(W,m.type,(function(t,e){var n=e.payload,o=Y(t.list,n.id);-1!=o&&(t.list[o].text=n.text)})),Object(V["a"])(W,b.type,(function(t,e){var n=e.payload,o=Y(t.list,n.id);-1!=o&&(t.list[o].done=n.done)})),W)},tt=Z;o["a"].use(H["default"]);var et=Object(p["createLogux"])({subprotocol:"1.0.0",server:"ws://127.0.0.1:31337/",userId:_,token:"",store:new K["a"]("todo-vue")});function nt(t,e){return ot.apply(this,arguments)}function ot(){return ot=Object(G["a"])(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return at.client.changeUser(e,n),t.next=3,at.client.node.waitFor("synchronized");case 3:at.commit("auth/done",{logged:e!=_});case 4:case"end":return t.stop()}}),t)}))),ot.apply(this,arguments)}var it=X(nt),at=new et.Store({state:{},mutations:{},actions:{},modules:{auth:it,todo:tt}});Object(Q["a"])(at.client),at.log.on("preadd",(function(t,e){t.type.startsWith("auth/")&&e.reasons.splice(0,e.reasons.length),t.type==C.type&&e.reasons.push("userId"),"auth/logout"==t.type&&at.log.removeReason("userId",{})})),at.client.start();var rt=at;o["a"].config.productionTip=!1,new o["a"]({store:rt,render:function(t){return t(B)}}).$mount("#app")}});
//# sourceMappingURL=app.e200f1c9.js.map